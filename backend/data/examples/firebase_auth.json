{
  "packageId": "firebase_auth",
  "packageName": "firebase_auth",
  "title": "Firebase Auth 구현 가이드",
  "description": "Firebase Authentication을 사용하여 Flutter 앱에 이메일/비밀번호 로그인을 구현하는 단계별 가이드입니다.",
  "difficulty": "중급",
  "estimatedTime": "30-45분",
  "prerequisites": [
    "Firebase 프로젝트 생성 (console.firebase.google.com)",
    "Flutter 프로젝트 준비 완료",
    "FlutterFire CLI 설치 (npm install -g firebase-tools)"
  ],
  "steps": [
    {
      "stepNumber": 1,
      "title": "Firebase 프로젝트 설정",
      "description": "Firebase Console에서 프로젝트를 생성하고 인증 방법을 활성화합니다.",
      "substeps": [
        "https://console.firebase.google.com 접속",
        "새 프로젝트 생성 또는 기존 프로젝트 선택",
        "좌측 메뉴에서 'Authentication' 클릭",
        "'Sign-in method' 탭에서 'Email/Password' 활성화"
      ],
      "note": "Google 로그인 등 추가 방법도 나중에 활성화할 수 있습니다."
    },
    {
      "stepNumber": 2,
      "title": "필수 패키지 설치",
      "description": "Firebase Core와 Auth 패키지를 pubspec.yaml에 추가합니다.",
      "code": {
        "language": "yaml",
        "filename": "pubspec.yaml",
        "content": "dependencies:\n  flutter:\n    sdk: flutter\n  firebase_core: ^3.0.0\n  firebase_auth: ^5.0.0"
      },
      "command": "flutter pub get"
    },
    {
      "stepNumber": 3,
      "title": "FlutterFire 설정 파일 생성",
      "description": "Firebase CLI를 사용하여 자동으로 설정 파일을 생성합니다.",
      "commands": [
        "firebase login",
        "flutterfire configure"
      ],
      "note": "이 명령어는 자동으로 firebase_options.dart 파일을 생성합니다. 프로젝트를 선택하고 Android/iOS 플랫폼을 선택하세요."
    },
    {
      "stepNumber": 4,
      "title": "Firebase 초기화 (main.dart)",
      "description": "앱 시작 시 Firebase를 초기화하는 코드를 작성합니다.",
      "code": {
        "language": "dart",
        "filename": "lib/main.dart",
        "content": "import 'package:firebase_core/firebase_core.dart';\nimport 'package:firebase_auth/firebase_auth.dart';\nimport 'package:flutter/material.dart';\nimport 'firebase_options.dart';\n\nFuture<void> main() async {\n  WidgetsFlutterBinding.ensureInitialized();\n  \n  // Firebase 초기화\n  await Firebase.initializeApp(\n    options: DefaultFirebaseOptions.currentPlatform,\n  );\n  \n  runApp(const MyApp());\n}"
      },
      "explanation": "WidgetsFlutterBinding.ensureInitialized()는 Firebase를 초기화하기 전에 반드시 호출해야 합니다."
    },
    {
      "stepNumber": 5,
      "title": "인증 상태 감지하기",
      "description": "사용자의 로그인 상태를 실시간으로 감지하여 화면을 전환합니다.",
      "code": {
        "language": "dart",
        "filename": "lib/main.dart",
        "content": "class MyApp extends StatelessWidget {\n  const MyApp({Key? key}) : super(key: key);\n\n  @override\n  Widget build(BuildContext context) {\n    return MaterialApp(\n      title: 'Firebase Auth Example',\n      theme: ThemeData(primarySwatch: Colors.blue),\n      home: StreamBuilder<User?>(\n        stream: FirebaseAuth.instance.authStateChanges(),\n        builder: (context, snapshot) {\n          // 로그인 상태 확인\n          if (snapshot.hasData) {\n            return HomePage();  // 로그인됨 → 홈 화면\n          }\n          return LoginPage();  // 비로그인 → 로그인 화면\n        },\n      ),\n    );\n  }\n}"
      },
      "explanation": "authStateChanges() 스트림은 로그인/로그아웃 시 자동으로 화면을 업데이트합니다."
    },
    {
      "stepNumber": 6,
      "title": "회원가입 구현",
      "description": "이메일과 비밀번호로 새 사용자를 생성합니다.",
      "code": {
        "language": "dart",
        "filename": "lib/auth_service.dart",
        "content": "import 'package:firebase_auth/firebase_auth.dart';\n\nclass AuthService {\n  final FirebaseAuth _auth = FirebaseAuth.instance;\n\n  // 회원가입\n  Future<UserCredential?> signUp(String email, String password) async {\n    try {\n      UserCredential userCredential = await _auth.createUserWithEmailAndPassword(\n        email: email,\n        password: password,\n      );\n      print('회원가입 성공: ${userCredential.user?.email}');\n      return userCredential;\n    } on FirebaseAuthException catch (e) {\n      if (e.code == 'weak-password') {\n        print('에러: 비밀번호가 너무 약합니다.');\n      } else if (e.code == 'email-already-in-use') {\n        print('에러: 이미 사용 중인 이메일입니다.');\n      } else {\n        print('에러: ${e.message}');\n      }\n      return null;\n    }\n  }\n}"
      }
    },
    {
      "stepNumber": 7,
      "title": "로그인 구현",
      "description": "이메일과 비밀번호로 기존 사용자 로그인을 처리합니다.",
      "code": {
        "language": "dart",
        "filename": "lib/auth_service.dart",
        "content": "  // 로그인\n  Future<UserCredential?> signIn(String email, String password) async {\n    try {\n      UserCredential userCredential = await _auth.signInWithEmailAndPassword(\n        email: email,\n        password: password,\n      );\n      print('로그인 성공: ${userCredential.user?.email}');\n      return userCredential;\n    } on FirebaseAuthException catch (e) {\n      if (e.code == 'user-not-found') {\n        print('에러: 사용자를 찾을 수 없습니다.');\n      } else if (e.code == 'wrong-password') {\n        print('에러: 비밀번호가 틀렸습니다.');\n      } else {\n        print('에러: ${e.message}');\n      }\n      return null;\n    }\n  }"
      }
    },
    {
      "stepNumber": 8,
      "title": "로그아웃 구현",
      "description": "현재 로그인한 사용자를 로그아웃합니다.",
      "code": {
        "language": "dart",
        "filename": "lib/auth_service.dart",
        "content": "  // 로그아웃\n  Future<void> signOut() async {\n    await _auth.signOut();\n    print('로그아웃 완료');\n  }"
      },
      "explanation": "signOut()이 호출되면 authStateChanges() 스트림이 자동으로 로그인 화면으로 전환합니다."
    },
    {
      "stepNumber": 9,
      "title": "현재 사용자 정보 가져오기",
      "description": "로그인한 사용자의 정보를 확인합니다.",
      "code": {
        "language": "dart",
        "content": "  // 현재 사용자 정보\n  User? getCurrentUser() {\n    return _auth.currentUser;\n  }\n\n  // 사용 예시\n  void printUserInfo() {\n    User? user = _auth.currentUser;\n    if (user != null) {\n      print('UID: ${user.uid}');\n      print('이메일: ${user.email}');\n      print('이메일 인증: ${user.emailVerified}');\n    } else {\n      print('로그인된 사용자 없음');\n    }\n  }"
      }
    },
    {
      "stepNumber": 10,
      "title": "로그인 화면 UI 예시",
      "description": "간단한 로그인 화면을 만듭니다.",
      "code": {
        "language": "dart",
        "filename": "lib/login_page.dart",
        "content": "import 'package:flutter/material.dart';\nimport 'auth_service.dart';\n\nclass LoginPage extends StatefulWidget {\n  @override\n  _LoginPageState createState() => _LoginPageState();\n}\n\nclass _LoginPageState extends State<LoginPage> {\n  final _emailController = TextEditingController();\n  final _passwordController = TextEditingController();\n  final _authService = AuthService();\n\n  @override\n  Widget build(BuildContext context) {\n    return Scaffold(\n      appBar: AppBar(title: Text('로그인')),\n      body: Padding(\n        padding: EdgeInsets.all(16),\n        child: Column(\n          mainAxisAlignment: MainAxisAlignment.center,\n          children: [\n            TextField(\n              controller: _emailController,\n              decoration: InputDecoration(labelText: '이메일'),\n            ),\n            SizedBox(height: 16),\n            TextField(\n              controller: _passwordController,\n              decoration: InputDecoration(labelText: '비밀번호'),\n              obscureText: true,\n            ),\n            SizedBox(height: 24),\n            ElevatedButton(\n              onPressed: () async {\n                await _authService.signIn(\n                  _emailController.text,\n                  _passwordController.text,\n                );\n              },\n              child: Text('로그인'),\n            ),\n            TextButton(\n              onPressed: () async {\n                await _authService.signUp(\n                  _emailController.text,\n                  _passwordController.text,\n                );\n              },\n              child: Text('회원가입'),\n            ),\n          ],\n        ),\n      ),\n    );\n  }\n}"
      }
    }
  ],
  "commonErrors": [
    {
      "error": "[core/no-app] No Firebase App '[DEFAULT]' has been created",
      "solution": "main() 함수에서 Firebase.initializeApp()을 호출했는지 확인하세요. WidgetsFlutterBinding.ensureInitialized()도 필요합니다.",
      "link": null
    },
    {
      "error": "PlatformException(ERROR_INVALID_CREDENTIAL)",
      "solution": "Firebase Console > Authentication에서 해당 로그인 방법(Email/Password)이 활성화되었는지 확인하세요.",
      "link": "https://console.firebase.google.com"
    },
    {
      "error": "FirebaseAuthException: weak-password",
      "solution": "비밀번호는 최소 6자 이상이어야 합니다.",
      "link": null
    },
    {
      "error": "FirebaseAuthException: email-already-in-use",
      "solution": "이미 등록된 이메일입니다. 로그인을 시도하거나 다른 이메일을 사용하세요.",
      "link": null
    },
    {
      "error": "FirebaseException: [firebase_auth/network-request-failed]",
      "solution": "인터넷 연결을 확인하세요. 에뮬레이터 사용 시 Firebase Emulator가 실행 중인지 확인하세요.",
      "link": null
    }
  ],
  "tips": [
    "개발 중에는 Firebase Local Emulator Suite를 사용하면 무료로 테스트할 수 있습니다.",
    "사용자 정보는 Firebase Console의 Authentication 탭에서 실시간으로 확인 가능합니다.",
    "비밀번호 재설정은 sendPasswordResetEmail() 메서드를 사용하세요.",
    "이메일 인증을 추가하려면 user.sendEmailVerification()을 호출하세요.",
    "Google, Apple, Facebook 로그인은 각각 별도의 플랫폼 설정이 필요합니다."
  ],
  "nextSteps": [
    {
      "title": "Google 로그인 추가",
      "description": "google_sign_in 패키지를 사용한 소셜 로그인 구현",
      "packageId": "google_sign_in"
    },
    {
      "title": "이메일 인증 기능",
      "description": "sendEmailVerification()을 사용한 이메일 인증",
      "packageId": null
    },
    {
      "title": "사용자 프로필 관리",
      "description": "updateProfile()로 displayName, photoURL 업데이트",
      "packageId": null
    },
    {
      "title": "Firebase Firestore 연동",
      "description": "사용자 데이터를 Firestore에 저장",
      "packageId": "cloud_firestore"
    }
  ],
  "references": [
    {
      "title": "Firebase Auth 공식 문서",
      "url": "https://firebase.google.com/docs/auth/flutter/start"
    },
    {
      "title": "pub.dev - firebase_auth",
      "url": "https://pub.dev/packages/firebase_auth"
    },
    {
      "title": "GitHub Example 코드",
      "url": "https://github.com/firebase/flutterfire/tree/master/packages/firebase_auth/firebase_auth/example"
    },
    {
      "title": "Firebase Console",
      "url": "https://console.firebase.google.com"
    }
  ],
  "exampleFeatures": [
    "Firebase 초기화 및 설정",
    "authStateChanges()를 사용한 로그인 상태 감지",
    "StreamBuilder를 통한 자동 화면 전환",
    "이메일/비밀번호 회원가입 및 로그인",
    "에러 핸들링 (FirebaseAuthException)",
    "현재 사용자 정보 조회"
  ],
  "platformNotes": {
    "android": "google-services.json 파일이 android/app/ 폴더에 있어야 합니다.",
    "ios": "GoogleService-Info.plist 파일이 ios/Runner/ 폴더에 있어야 합니다.",
    "web": "firebase_options.dart의 웹 설정을 사용합니다."
  }
}
