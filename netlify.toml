[build]
  # 프론트엔드 빌드 명령
  # 루트 dependencies 설치 (Functions용) + 프론트엔드 빌드
  command = "npm install && cd frontend && npm install && npm run build"
  # 빌드 결과물 디렉토리
  publish = "frontend/dist"

[functions]
  # Netlify Functions 디렉토리
  directory = "netlify/functions"
  # Node.js 버전
  node_bundler = "esbuild"

[[redirects]]
  # API 요청을 Netlify Functions로 리다이렉트
  from = "/api/intent"
  to = "/.netlify/functions/intent"
  status = 200

[[redirects]]
  # SPA를 위한 리다이렉트 (모든 요청을 index.html로)
  from = "/*"
  to = "/index.html"
  status = 200
